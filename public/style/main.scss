$base-color: hsl(160, 70, 70);
$base-color-t1: hsla(160, 70, 70, 0.7);
$base-color-t2: hsla(160, 70, 70, 0.5);
$sec-color: hsla(25, 70%, 70%, 1);
$sec-color-t2: hsla(25, 70%, 70%, 0.1);
$gold: hsl(45, 77%, 80%);
$ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);

body {
	margin: 0;
	padding: 0;
	color: $base-color;
	font-family: Cairo, sans-serif;
	font-size: 40px;
}

#gradient-bg {
	position: absolute;
	width: 100vw;
	height: 100vh;
	background: radial-gradient(ellipse, hsla(188, 80%, 8%, 1) 0%, hsla(220, 91%, 5%, 1) 100%);
}

#scene {
	width: 100%;
	height: 100%;
	padding: 0;
	box-sizing: border-box;
	overflow: hidden;
	perspective: 1800px;
	position: relative;
}

#camera {
	margin: 0 auto;
	height: 100%;
	position: relative;
	transform-style: preserve-3d;
	display: flex;
	justify-content: center;
	align-items: center;
}

#grid-bg {
	$w: 300%;
	$h: 200%;
	position: absolute;
	width: $w;
	height: $h;
	left: calc($w / 2);
	top: calc($h / 2);
	background: repeating-linear-gradient(
			to bottom,
			$base-color,
			$base-color 2px,
			hsla(0, 0%, 0%, 0%) 3px,
			hsla(0, 0%, 0%, 0%) 13px
		),
		repeating-linear-gradient(
			to left,
			$base-color,
			$base-color 2px,
			hsla(0, 0%, 0%, 0%) 3px,
			hsla(0, 0%, 0%, 0%) 13px
		);
	opacity: 0.02;
	transform: translateZ(0px);
}

.stack {
	position: absolute;
	width: 600px;
	height: 250px;
	transform-style: preserve-3d;
	text-align: center;
}
.box-frame {
	position: absolute;
	width: 100%;
	height: 100%;
	transform-style: preserve-3d;

	&.lower {
		opacity: 0.2;
	}

	.box {
		margin: auto;
		height: 100%;
		transform-style: preserve-3d;
		border: 2px solid $base-color-t1;
		color: $base-color-t1;
		display: flex;
		justify-content: center;
		// overflow: hidden;
		transition: transform 0.5s $ease-out-cubic, width 0s ease-out;
		animation-duration: 0.4s, 0.3s;
		// animation-fill-mode: both;
		animation-timing-function: ease, ease-in-out;
		animation-delay: 0s;
		&.upper {
			animation-name: flicker, sliding-doors-open;
		}
		&.lower {
			user-select: none;
			animation-name: flicker, sliding-doors-open;
		}
		.box-content {
			transform-style: preserve-3d;
		}
	}
}

.corners-frame {
	$pad: 35px;
	position: absolute;
	width: calc(600px + #{$pad});
	height: calc(250px + #{$pad});
	left: calc(-1 * #{$pad} / 2);
	top: calc(-1 * #{$pad} / 2);
	display: flex;
	justify-content: center;
	align-items: center;
	transform-style: preserve-3d;

	&.lower {
		opacity: 0.2;
	}
}

@function genCorners($col) {
	$len: 5px;
	@return linear-gradient(to right, $col $len, transparent $len) 0 0,
		linear-gradient(to right, $col $len, transparent $len) 0 100%,
		linear-gradient(to left, $col $len, transparent $len) 100% 0,
		linear-gradient(to left, $col $len, transparent $len) 100% 100%,
		linear-gradient(to bottom, $col $len, transparent $len) 0 0,
		linear-gradient(to bottom, $col $len, transparent $len) 100% 0,
		linear-gradient(to top, $col $len, transparent $len) 0 100%,
		linear-gradient(to top, $col $len, transparent $len) 100% 100%;
}
.corners {
	position: relative;
	width: 100%;
	height: 100%;
	box-sizing: border-box;

	animation-name: zoom-half, fadein-8;
	animation-duration: 0.3s, 0.5s;
	animation-timing-function: $ease-out-cubic, ease-out;
	animation-delay: 0.2s, 0s;
	animation-fill-mode: both;
	opacity: 0;

	background: genCorners($sec-color);
	background-repeat: no-repeat;
	background-size: 30px 30px;

	&.upper {
		transform: translateZ(25px);
	}
	&.lower {
		transform: translateZ(-25px);
	}
}

@import './animations';
@import './button';
